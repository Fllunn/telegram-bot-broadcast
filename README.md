# Telegram Broadcast Bot

> –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π Telegram‚Äë–±–æ—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫ –Ω–∞ –±–∞–∑–µ [Telethon](https://github.com/LonamiWebs/Telethon) –∏ MongoDB. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤, —Ä—É—á–Ω—ã–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏, –∑–∞–≥—Ä—É–∑–∫—É —Å–ø–∏—Å–∫–æ–≤ –≥—Ä—É–ø–ø –∏–∑ Excel –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-env)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–æ—Ç–ª–∞–¥–∫–∞)
- [–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#—á–∞—Å—Ç—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
- [–í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç](#–≤–∫–ª–∞–¥-–≤-–ø—Ä–æ–µ–∫—Ç)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## –û–±–∑–æ—Ä
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π Telegram‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ Telegram (—á–µ—Ä–µ–∑ SMS –∏–ª–∏ QR‚Äë–∫–æ–¥),
- –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø/–∫–∞–Ω–∞–ª–æ–≤ –∏–∑ Excel,
- –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç/–∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏,
- –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä—É—á–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫—É.

–í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, Telethon‚Äë—Å–µ—Å—Å–∏–∏, –∞–≤—Ç–æ–∑–∞–¥–∞—á–∏) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ MongoDB. –ë–æ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —É–º–µ–µ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç**: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É/–∫–æ–¥—É –∏–ª–∏ –ø–æ QR, –ø—Ä–æ–≤–µ—Ä–∫–∞ ¬´–∑–¥–æ—Ä–æ–≤—å—è¬ª –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è.
- **–†—É—á–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏**: —Ç–µ–∫—Å—Ç/–∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç, –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≥—Ä—É–ø–ø–∞–º, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –æ—Ç–º–µ–Ω–∞, –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏.
- **–ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏**: –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å –¥–∂–∏—Ç—Ç–µ—Ä–æ–º, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ –∑–∞–¥–∞—á–µ, –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ü–∏–∫–ª–∞–º.
- **–°–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø**: –∑–∞–≥—Ä—É–∑–∫–∞ `.xlsx`/`.xls`, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫/—é–∑–µ—Ä–Ω–µ–π–º–æ–≤, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ chat id/username/link, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º**: –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã, –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ ‚Äî –Ω–∞ —Ä—É—Å—Å–∫–æ–º.
- **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–µ—à ¬´–∑–¥–æ—Ä–æ–≤—å—è¬ª –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –∏–Ω–¥–µ–∫—Å—ã Mongo.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
src/
‚îú‚îÄ‚îÄ app.py                   # –°–±–æ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (python -m src)
‚îú‚îÄ‚îÄ bot/                     # –ö–æ–º–∞–Ω–¥—ã Telethon –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ application.py       # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (–∫–ª–∏–µ–Ω—Ç + –∫–æ–Ω—Ç–µ–∫—Å—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ commands/            # /start, /broadcast, /auto_schedule, –∏ —Ç.–¥.
‚îÇ   ‚îú‚îÄ‚îÄ context.py           # –ö–æ–Ω—Ç–µ–∫—Å—Ç: —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏/—Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ keyboards.py         # Reply/inline‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (—Ä—É—Å—Å–∫–∏–µ –ø–æ–¥–ø–∏—Å–∏)
‚îú‚îÄ‚îÄ config/                  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ settings.py          # Pydantic‚Äë–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
‚îÇ   ‚îî‚îÄ‚îÄ broadcast_settings.py# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∑–∞–¥–µ—Ä–∂–µ–∫/–±–∞—Ç—á–µ–π –¥–ª—è —Ä—É—á–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
‚îú‚îÄ‚îÄ db/                      # Mongo‚Äë–∫–ª–∏–µ–Ω—Ç –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ client.py            # AsyncIOMotor‚Äë–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ repositories/        # users, sessions, auto tasks, accounts
‚îú‚îÄ‚îÄ models/                  # Pydantic‚Äë–º–æ–¥–µ–ª–∏ (users, sessions, tasks)
‚îú‚îÄ‚îÄ services/                # –ë–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞ (—Å—Ç–∞—Ç—É—Å—ã, –∞–≤—Ç–æ‚Äë–¥–≤–∏–∂–æ–∫, —É—Ç–∏–ª–∏—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ telethon_manager.py  # –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Telethon‚Äë—Å–µ—Å—Å–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ account_status.py    # –ü—Ä–æ–≤–µ—Ä–∫–∞ ¬´–∑–¥–æ—Ä–æ–≤—å—è¬ª –∞–∫–∫–∞—É–Ω—Ç–æ–≤ + –∫–µ—à
‚îÇ   ‚îú‚îÄ‚îÄ broadcast_state.py   # FSM –¥–ª—è —Ä—É—á–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ groups_state.py      # FSM –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏/–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä—É–ø–ø
‚îÇ   ‚îî‚îÄ‚îÄ auto_broadcast/      # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, —Ä–∞–Ω–Ω–µ—Ä, –ø–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ utils/logging.py         # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (dictConfig)
```
–ö–æ–ª–ª–µ–∫—Ü–∏–∏ MongoDB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `users`, `telethon_sessions`, `auto_broadcast_tasks`, `auto_accounts`.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Python ‚â• 3.10** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.11)
- **MongoDB 5.x+** (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –æ–±–ª–∞—á–Ω–æ)
- **TELEGRAM_API_ID / TELEGRAM_API_HASH** (my.telegram.org) –∏ **TELEGRAM_BOT_TOKEN** (BotFather)
- Linux: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ `libffi`/`libssl` —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### Windows (Git Bash)
```bash
# 1) –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/Fllunn/telegram-bot-broadcast.git
cd telegram-bot-broadcast

# 2) –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
source .venv/Scripts/activate

# 3) –û–±–Ω–æ–≤–∏—Ç–µ pip –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python -m pip install --upgrade pip
python -m pip install -r requirements.txt

# 4) –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
cp .env.example .env
# –£–∫–∞–∂–∏—Ç–µ TELEGRAM_API_ID, TELEGRAM_API_HASH, TELEGRAM_BOT_TOKEN, MONGO_DSN, MONGO_DATABASE

# 5) –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MongoDB –¥–æ—Å—Ç—É–ø–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, mongodb://localhost:27017)

# 6) –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python -m src
```
–ü–æ–¥—Å–∫–∞–∑–∫–∏:
- PowerShell: `./.venv/Scripts/Activate.ps1`, CMD: `./.venv/Scripts/activate.bat`
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ CMD –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `chcp 65001`

### Linux/macOS
```bash
git clone https://github.com/Fllunn/telegram-bot-broadcast.git
cd telegram-bot-broadcast

python -m venv .venv
source .venv/bin/activate

python -m pip install --upgrade pip
python -m pip install -r requirements.txt

cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ TELEGRAM_API_ID, TELEGRAM_API_HASH, TELEGRAM_BOT_TOKEN, MONGO_DSN, MONGO_DATABASE

python -m src
```

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
python - << 'PY'
import telethon, motor
print("Telethon:", telethon.__version__)
print("Motor:", motor.__version__)
PY

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
python - << 'PY'
import asyncio
from motor.motor_asyncio import AsyncIOMotorClient
async def main():
      client = AsyncIOMotorClient("mongodb://localhost:27017")
      dbs = await client.list_database_names()
      print("Mongo OK, databases:", dbs[:5])
asyncio.run(main())
PY
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–∏—Ç–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `pydantic-settings` –∏–∑ —Ñ–∞–π–ª–∞ `.env`.

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|-------------|------------------------|------------|
| `TELEGRAM_API_ID` | –¥–∞ | ‚Äì | API ID –¥–ª—è Telethon‚Äë–∫–ª–∏–µ–Ω—Ç–æ–≤ |
| `TELEGRAM_API_HASH` | –¥–∞ | ‚Äì | API Hash –¥–ª—è Telethon |
| `TELEGRAM_BOT_TOKEN` | –¥–∞ | ‚Äì | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather |
| `MONGO_DSN` | –¥–∞ | ‚Äì | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB |
| `MONGO_DATABASE` | –¥–∞ | ‚Äì | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `APP_NAME` | –Ω–µ—Ç | `telegram-broadcast-bot` | –ò–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤ –ª–æ–≥–∞—Ö/–¥—Ä–∞–π–≤–µ—Ä–µ) |
| `BOT_SESSION_NAME` | –Ω–µ—Ç | `bot_session` | –ò–º—è —Ñ–∞–π–ª–∞ —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞ (`bot_session.session`) |
| `USER_COLLECTION` | –Ω–µ—Ç | `users` | –ö–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞ |
| `SESSION_COLLECTION` | –Ω–µ—Ç | `telethon_sessions` | –ö–æ–ª–ª–µ–∫—Ü–∏—è Telethon‚Äë—Å–µ—Å—Å–∏–π |
| `AUTO_TASK_COLLECTION` | –Ω–µ—Ç | `auto_broadcast_tasks` | –ö–æ–ª–ª–µ–∫—Ü–∏—è –∞–≤—Ç–æ–∑–∞–¥–∞—á |
| `AUTO_ACCOUNT_COLLECTION` | –Ω–µ—Ç | `auto_accounts` | –ö–æ–ª–ª–µ–∫—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ |
| `AUTO_TASK_POLL_INTERVAL` | –Ω–µ—Ç | `15` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –∞–≤—Ç–æ–∑–∞–¥–∞—á (—Å–µ–∫.) |
| `AUTO_TASK_LOCK_TTL` | –Ω–µ—Ç | `180` | TTL –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞–≤—Ç–æ–∑–∞–¥–∞—á (—Å–µ–∫.) |
| `LOG_LEVEL` | –Ω–µ—Ç | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |
| `ACCOUNT_STATUS_CONCURRENCY` | –Ω–µ—Ç | `10` | –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ |
| `ACCOUNT_STATUS_TIMEOUT_SECONDS` | –Ω–µ—Ç | `2.0` | –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–¥–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `ACCOUNT_STATUS_CACHE_TTL_SECONDS` | –Ω–µ—Ç | `20.0` | TTL –∫–µ—à–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ |
| `ACCOUNT_STATUS_DB_REFRESH_SECONDS` | –Ω–µ—Ç | `180.0` | –ü–µ—Ä–∏–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –ë–î |

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä `.env`:
```dotenv
TELEGRAM_API_ID=123456
TELEGRAM_API_HASH=<–≤–∞—à_api_hash>
TELEGRAM_BOT_TOKEN=<—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞_–∏–∑_BotFather>
MONGO_DSN=mongodb://localhost:27017
MONGO_DATABASE=telegram_bot
```

> –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã —Å—Ä–µ–¥—ã.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è ‚Äî –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

| –ö–æ–ª–ª–µ–∫—Ü–∏—è | –ò–Ω–¥–µ–∫—Å—ã | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|---------|------------|
| `users` | `telegram_id` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) | –û–ø–µ—Ä–∞—Ç–æ—Ä—ã, –æ–±—â–∞—é—â–∏–µ—Å—è —Å –±–æ—Ç–æ–º |
| `telethon_sessions` | `session_id` (—É–Ω–∏–∫.), `(owner_id, owner_type)` | –°–µ—Å—Å–∏–∏ Telethon, –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ä–∞—Å—Å—ã–ª–æ–∫, —Å–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø, —Å—Ç–∞—Ç—É—Å—ã |
| `auto_broadcast_tasks` | `task_id` (—É–Ω–∏–∫.), `(user_id, status)`, `next_run_ts`, `enabled`, `locked_by` | –ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| `auto_accounts` | `account_id` (—É–Ω–∏–∫.), `(owner_id, status)`, `cooldown_until` | –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–æ–∫ |

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Mongo –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —É–∫–∞–∑–∞–Ω–Ω–æ–π –±–∞–∑—ã. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ ‚Äî –≤–∫–ª—é—á–∞–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, TLS –∏ –±—ç–∫–∞–ø—ã.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ Telegram –∏ Mongo.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
    ```bash
    python -m src
    ```
4. –í Telegram –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä.

> –§–∞–π–ª —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞ `bot_session.session` —Ö—Ä–∞–Ω–∏—Ç–µ —Ä—è–¥–æ–º —Å `.env` –Ω–∞ —Ö–æ—Å—Ç–µ.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–∞–Ω–¥–∞/–∫–Ω–æ–ø–∫–∞ |
|------------|----------------|
| –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é | `/start` |
| –í—Ö–æ–¥ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É (SMS) | `/login_phone` |
| –í—Ö–æ–¥ –ø–æ QR‚Äë–∫–æ–¥—É | `/login_qr` |
| –°–ø–∏—Å–æ–∫/–æ—Ç–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ | `/accounts` |
| –î–æ–±–∞–≤–∏—Ç—å/–∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç | `/add_text` |
| –î–æ–±–∞–≤–∏—Ç—å/–∑–∞–º–µ–Ω–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É | `/add_image` |
| –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø | `/upload_groups` |
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã | `/view_groups` |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ | `/view_broadcast` |
| –ó–∞–ø—É—Å–∫ —Ä—É—á–Ω–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ | `/broadcast` |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏ | –∫–Ω–æ–ø–∫–∞ ¬´–ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∞¬ª –∏–ª–∏ `/auto_schedule` |
| –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏ | –∫–Ω–æ–ø–∫–∞ ¬´–°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏¬ª –∏–ª–∏ `/auto_status` |
| –ü–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—Å—Ç–æ–ø –∞–≤—Ç–æ | `/auto_pause`, `/auto_resume`, `/auto_stop` |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ü–∏–∫–ª–∞–º | `/auto_notify_on`, `/auto_notify_off` |

### –†—É—á–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ ‚Äî –ø—Ä–∏–º–µ—Ä
1) **–î–æ–±–∞–≤—å—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** (—Ç–µ–∫—Å—Ç/–∫–∞—Ä—Ç–∏–Ω–∫–∞):
```text
–í—ã: /add_text
–ë–æ—Ç: –î–ª—è –∫–∞–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏? –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∏–∂–µ.
–í—ã: –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ –≤—Å–µ–º –∞–∫–∫–∞—É–Ω—Ç–∞–º.
–í—ã: ‚ö°Ô∏è –ù–æ–≤–æ–µ —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ! –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –Ω–∏–∂–µ.
–ë–æ—Ç: –¢–µ–∫—Å—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π /add_text –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏.
```
–ö–∞—Ä—Ç–∏–Ω–∫—É –¥–æ–±–∞–≤–ª—è–π—Ç–µ —á–µ—Ä–µ–∑ `/add_image` ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ/–¥–æ–∫—É–º–µ–Ω—Ç.

2) **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≥—Ä—É–ø–ø—ã** (–Ω–∞ –æ–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –Ω–∞ –≤—Å–µ):
```text
–í—ã: /upload_groups
–ë–æ—Ç: –í—ã–±–µ—Ä–∏—Ç–µ, –¥–ª—è –∫–∞–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø.
–í—ã: –û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç ‚Üí @sales_manager (+7‚ÄØ999‚ÄØ888‚Äë77‚Äë66)
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤—å—Ç–µ Excel‚Äë—Ñ–∞–π–ª (.xlsx –∏–ª–∏ .xls) —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ ¬´–ù–∞–∑–≤–∞–Ω–∏–µ¬ª, ¬´Username¬ª, ¬´–°—Å—ã–ª–∫–∞¬ª.
–í—ã: [–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª groups.xlsx]
–ë–æ—Ç: –ù–∞–π–¥–µ–Ω–æ 180 —Å—Ç—Ä–æ–∫ (—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø: 142). –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫? [‚úÖ –î–∞ / ‚ùå –ù–µ—Ç]
```

3) **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–∞—Å—Å—ã–ª–∫—É**:
```text
–í—ã: /broadcast
–ë–æ—Ç: –í—ã–±–µ—Ä–∏—Ç–µ, —Å –∫–∞–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É. [–û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç / –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã]
...
–ë–æ—Ç: –ë—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ 142 —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã: —Ç–µ–∫—Å—Ç ‚Äî –µ—Å—Ç—å, –∫–∞—Ä—Ç–∏–Ω–∫–∞ ‚Äî –Ω–µ—Ç. –û—Ü–µ–Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è: ‚âà 18 –º–∏–Ω. –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?
–í—ã: ‚úÖ –ù–∞—á–∞—Ç—å
–ë–æ—Ç: –†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 57 / 142 ¬∑ –£—Å–ø–µ—à–Ω–æ: 55 ¬∑ –ù–µ—É–¥–∞—á–Ω–æ: 2 ¬∑ –¢–µ–∫—É—â–∏–π –∞–∫–∫–∞—É–Ω—Ç: @sales_manager ¬∑ –¢–µ–∫—É—â–∏–π —á–∞—Ç: @telegram_group
```
–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É **¬´‚ùå –û—Ç–º–µ–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∏¬ª**. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ ‚Äî –∏—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞.

### –ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∞ ‚Äî –ø—Ä–∏–º–µ—Ä
1) **–û—Ç–∫—Ä–æ–π—Ç–µ –º–∞—Å—Ç–µ—Ä**:
```text
–í—ã: –ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∞
–ë–æ—Ç: –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º: ‚Ä¢ –û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç ‚Ä¢ –í—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã
```
2) **–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª**:
```text
–ë–æ—Ç: –ö–∞–∫ —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É? –£–∫–∞–∂–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:–ú–ú:–°–°. –ú–∞–∫—Å–∏–º—É–º ‚Äî 168:00:00.
–í—ã: 02:30:00
–ë–æ—Ç: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã... –í—Å—ë –≥–æ—Ç–æ–≤–æ. –ó–∞–ø—É—Å–∫–∞—Ç—å –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫—É –∫–∞–∂–¥—ã–µ 2 —á 30 –º–∏–Ω?
–í—ã: ‚úÖ –°–æ–∑–¥–∞—Ç—å
```
3) **–°–ª–µ–¥–∏—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ**:
```text
–í—ã: /auto_status
–ë–æ—Ç: –ê–∫—Ç–∏–≤–Ω—ã–µ –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏:
‚Ä¢ task_7f03d945 ‚Äî –∫–∞–∂–¥—ã–µ 02:30:00, —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫ ‚âà 14:20 (–ú–°–ö). –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 480, –û—à–∏–±–æ–∫: 3.
–í—ã: /auto_pause task_7f03d945
–ë–æ—Ç: –ó–∞–¥–∞—á–∞ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–∞—É–∑—É.
–í—ã: /auto_resume task_7f03d945
–ë–æ—Ç: –ó–∞–¥–∞—á–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞.
```
–í–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ü–∏–∫–ª–∞–º `/auto_notify_on <task_id>`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —Å–≤–æ–¥–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≥—Ä—É–ø–ø
- –§–æ—Ä–º–∞—Ç—ã: `.xlsx`, `.xls` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –ª–∏—Å—Ç)
- –ö–æ–ª–æ–Ω–∫–∏ (—Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω): `–ù–∞–∑–≤–∞–Ω–∏–µ`, `Username`, `–°—Å—ã–ª–∫–∞` (–ª–∏—à–Ω–∏–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è; –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è)
- –°—Å—ã–ª–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∫ `https://t.me/...`, `@` —É username —É–¥–∞–ª—è–µ—Ç—Å—è, –¥—É–±–ª–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ chat id/username/link
- –ó–∞–ø–∏—Å–∏ —Å `is_member=false` (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞) –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `metadata.broadcast_groups_stats` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
- `/login_phone` ‚Äî –≤—Ö–æ–¥ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É/–∫–æ–¥—É –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, 2FA‚Äë–ø–∞—Ä–æ–ª—é
- `/login_qr` ‚Äî –≤—Ö–æ–¥ –ø–æ QR —Å –∫–Ω–æ–ø–∫–æ–π ¬´–û–±–Ω–æ–≤–∏—Ç—å QR¬ª –∏ –∑–∞—â–∏—Ç–æ–π –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- `/accounts` ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã, —Ñ–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∫–Ω–æ–ø–∫–∏ ¬´–û—Ç–≤—è–∑–∞—Ç—å¬ª
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ –¥–æ—Å—Ç—É–ø–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ—Ç –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∞–∫–∫–∞—É–Ω—Ç –∏ –ø—Ä–æ—Å–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- **–†–∞–∑–¥–µ–ª—è–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç—ã –ø–æ –∑–∞–¥–∞—á–∞–º**: –º–∞—Ä–∫–µ—Ç–∏–Ω–≥/–ø–æ–¥–¥–µ—Ä–∂–∫–∞/–ø—Ä–æ–¥–∞–∂–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏ —Å–ø–∏—Å–∫–∏ –≥—Ä—É–ø–ø
- **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–ø–∏—Å–∫–∏**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/upload_groups` –ø–æ–≤—Ç–æ—Ä–Ω–æ, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–∞—Ç—ã
- **–ò–∑–±–µ–≥–∞–π—Ç–µ –¥—É–±–ª–µ–π**: –¥–µ—Ä–∂–∏—Ç–µ Excel –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤ ‚Äî —ç—Ç–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è —Ä–∞—Å—Å—ã–ª–∫–∏
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –∞–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∏**: –≤—ã–±–∏—Ä–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ—Ü–µ–Ω–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ü–∏–∫–ª–∞, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –∑–∞–ø—É—Å–∫–æ–≤
- **–õ–æ–≥–∏**: `LOG_LEVEL=DEBUG` –Ω–∞ —Å—Ç–µ–Ω–¥–µ, `INFO` ‚Äî –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ
- **–ë—ç–∫–∞–ø—ã**: —Ö—Ä–∞–Ω–∏—Ç–µ `bot_session.session` –∏ –±–∞–∑—ã Mongo –≤ –Ω–∞–¥—ë–∂–Ω—ã—Ö –±—ç–∫–∞–ø–∞—Ö

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `utils.logging.configure_logging()`
- –§–æ—Ä–º–∞—Ç: `timestamp | level | logger | message`
- –ü—Ä–∏–º–µ—Ä –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:
   ```bash
   LOG_LEVEL=DEBUG python -m src
   ```
- –û—à–∏–±–∫–∏ Telethon –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (user id, –∞–∫–∫–∞—É–Ω—Ç, —á–∞—Ç). –ò—â–∏—Ç–µ `AuthKeyUnregisteredError`, `DialogsFetchError` –∏ —Ç. –ø.

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–î—É–±–ª–∏ –∏–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫**: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Excel –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø–∞—Ö (¬´–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞¬ª)
- **–°–±–æ–π –≤—Ö–æ–¥–∞**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞ `+79998887766`, 2FA‚Äë–ø–∞—Ä–æ–ª—å; –µ—Å–ª–∏ QR –∏—Å—Ç—ë–∫ ‚Äî ¬´üîÑ –û–±–Ω–æ–≤–∏—Ç—å QR¬ª
- **–ê–≤—Ç–æ—Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ `/auto_status`, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `next_run_ts` –≤ `auto_broadcast_tasks`, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ**: –≤–µ—Ä–æ—è—Ç–Ω–æ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Telegram ‚Äî –±–æ—Ç –ø–æ–º–µ—Ç–∏—Ç –∞–∫–∫–∞—É–Ω—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º; –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `/login_phone` —Å–Ω–æ–≤–∞
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Mongo**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `MONGO_DSN` –∏ —Å–µ—Ç—å; –¥–ª—è TLS –¥–æ–±–∞–≤—å—Ç–µ `?tls=true` –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã CA
- **–ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –≤ Windows CMD**: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `chcp 65001` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º